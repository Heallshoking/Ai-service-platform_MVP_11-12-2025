#!/usr/bin/expect -f
# ĞĞ²Ñ‚Ğ¾Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ±Ğ¾Ñ‚Ğ¾Ğ² Ğ½Ğ° VPS

set timeout 120
set password "pneDRE2K?Tz1k-"
set host "root@176.98.178.109"

puts "\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
puts "  ğŸ“¤ ĞšĞĞŸĞ˜Ğ ĞĞ’ĞĞĞ˜Ğ• Ğ‘ĞĞ¢ĞĞ’ ĞĞ VPS"
puts "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n"

# ĞšĞ¾Ğ¿Ğ¸Ñ€ÑƒĞµĞ¼ Ğ±Ğ¾Ñ‚Ñ‹
spawn scp telegram_client_bot.py telegram_master_bot.py $host:/root/ai_service_bots/
expect {
    "password:" {
        send "$password\r"
        exp_continue
    }
    "yes/no" {
        send "yes\r"
        exp_continue
    }
    eof
}

puts "\nâœ… Ğ‘Ğ¾Ñ‚Ñ‹ ÑĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹!\n"

puts "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
puts "  ğŸ”„ ĞŸĞ•Ğ Ğ•Ğ—ĞĞŸĞ£Ğ¡Ğš Ğ‘ĞĞ¢ĞĞ’"
puts "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n"

# ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ÑÑ Ğ¸ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµĞ¼
spawn ssh $host
expect "password:"
send "$password\r"
expect "# "

send "cd /root/ai_service_bots\r"
expect "# "
puts "  âœ“ ĞŸĞµÑ€ĞµÑˆĞ»Ğ¸ Ğ² Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ"

send "systemctl stop telegram_bots\r"
expect "# "
puts "  âœ“ ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ğ»Ğ¸ ÑÑ‚Ğ°Ñ€Ñ‹Ğµ Ğ±Ğ¾Ñ‚Ñ‹"

send "systemctl start telegram_bots\r"
expect "# "
puts "  âœ“ Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ğ»Ğ¸ Ğ½Ğ¾Ğ²Ñ‹Ğµ Ğ±Ğ¾Ñ‚Ñ‹"

send "systemctl status telegram_bots --no-pager | head -15\r"
expect "# "
puts "  âœ“ ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ğ»Ğ¸ ÑÑ‚Ğ°Ñ‚ÑƒÑ"

send "exit\r"
expect eof

puts "\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
puts "  âœ… Ğ”Ğ•ĞŸĞ›ĞĞ™ Ğ—ĞĞ’Ğ•Ğ Ğ¨Ğ•Ğ!"
puts "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n"
