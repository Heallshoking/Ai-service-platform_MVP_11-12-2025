<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—ã–∑–æ–≤ –º–∞—Å—Ç–µ—Ä–∞ –≤ –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥–µ –∑–∞ 2 –º–∏–Ω—É—Ç—ã | –ë–ê–õ–¢–°–ï–¢–¨</title>
    <meta name="description" content="–°—Ä–æ—á–Ω—ã–π –≤—ã–∑–æ–≤ —ç–ª–µ–∫—Ç—Ä–∏–∫–∞ –∏ —Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞ –≤ –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥–µ. AI-–ø–æ–º–æ—â–Ω–∏–∫ –ø–æ–¥–±–µ—Ä—ë—Ç —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –∑–∞ 2 –º–∏–Ω—É—Ç—ã. –¶–µ–Ω—ã –æ—Ç 400‚ÇΩ">
    <link rel="stylesheet" href="services-calculator.css">
    <link rel="stylesheet" href="ai-chat-styles.css">
    <style>
        /* –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ - Telegram-—Å—Ç–∏–ª—å */
        body {
            background: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 50%, #fef3c7 100%);
            margin: 0;
            padding: 0;
        }
        
        .main-hero {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 60px 20px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .main-hero h1 {
            font-size: 42px;
            font-weight: 800;
            margin-bottom: 16px;
            line-height: 1.2;
        }
        
        .main-hero p {
            font-size: 18px;
            opacity: 0.95;
            max-width: 600px;
            margin: 0 auto 24px;
        }
        
        .hero-stats {
            display: flex;
            gap: 40px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 32px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .main-container {
            max-width: 768px;
            margin: -40px auto 40px;
            padding: 0 16px;
        }
        
        .telegram-chat-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 8px 24px rgba(0,0,0,0.12);
            margin-bottom: 24px;
        }
        
        @media (max-width: 768px) {
            .main-hero h1 {
                font-size: 32px;
            }
            
            .main-hero p {
                font-size: 16px;
            }
            
            .main-hero {
                padding: 40px 16px;
            }
            
            .hero-stats {
                gap: 24px;
            }
            
            .stat-number {
                font-size: 28px;
            }
        }
    </style>
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div class="main-hero">
        <h1>‚ö° –í—ã–∑–æ–≤ –º–∞—Å—Ç–µ—Ä–∞ –∑–∞ 2 –º–∏–Ω—É—Ç—ã</h1>
        <p>–≠–ª–µ–∫—Ç—Ä–∏–∫, —Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫, –º–∞—Å—Ç–µ—Ä –Ω–∞ —á–∞—Å –≤ –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥–µ –∏ –æ–±–ª–∞—Å—Ç–∏</p>
        <div class="hero-stats">
            <div class="stat-item">
                <div class="stat-number">2 –º–∏–Ω</div>
                <div class="stat-label">–ü–æ–¥–±–æ—Ä –º–∞—Å—Ç–µ—Ä–∞</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">4.9</div>
                <div class="stat-label">–†–µ–π—Ç–∏–Ω–≥ –º–∞—Å—Ç–µ—Ä–æ–≤</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">24/7</div>
                <div class="stat-label">–†–∞–±–æ—Ç–∞–µ–º –∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ</div>
            </div>
        </div>
    </div>

    <!-- Telegram-—Å—Ç–∏–ª—å —á–∞—Ç -->
    <div class="main-container">
        <div class="telegram-chat-card">
            <div id="chat-container"></div>
        </div>
    </div>

    <script src="ai-chat-funnel.js"></script>
    <script>
        // –ö–ª–∞—Å—Å –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –∑–∞—è–≤–∫–∞—Ö
        class HomePageChat {
            constructor() {
                this.messages = [];
                this.step = 0;
                this.scenario = null;
                this.data = {};
                this.init();
            }

            init() {
                const container = document.getElementById('chat-container');
                container.innerHTML = `
                    <div class="chat-window" style="background: #f0f2f5; min-height: 500px; display: flex; flex-direction: column;">
                        <div class="chat-header" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 16px 20px; display: flex; align-items: center; gap: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.15);">
                            <div class="message-avatar" style="width: 44px; height: 44px; border-radius: 50%; background: white; display: flex; align-items: center; justify-content: center; font-size: 24px;">ü§ñ</div>
                            <div>
                                <div style="font-weight: 600; font-size: 16px;">–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –ë–ê–õ–¢–°–ï–¢–¨</div>
                                <div style="font-size: 12px; opacity: 0.9;">–≤ —Å–µ—Ç–∏</div>
                            </div>
                        </div>
                        <div id="messages" class="chat-messages" style="flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 12px;"></div>
                    </div>
                `;
                
                setTimeout(() => this.start(), 300);
            }

            start() {
                this.addBot('üëã –ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ–º–æ–≥—É –≤–∞–º –≤—ã–∑–≤–∞—Ç—å –º–∞—Å—Ç–µ—Ä–∞ –∏–ª–∏ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç.\n\nüéØ –ß—Ç–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?', 'scenario-choice');
            }

            addBot(text, inputType = null, field = null) {
                this.showTyping();
                setTimeout(() => {
                    this.removeTyping();
                    const container = document.getElementById('messages');
                    const html = `
                        <div class="chat-message ai-message" style="display: flex; align-items: flex-start; gap: 8px;">
                            <div class="message-avatar" style="width: 36px; height: 36px; border-radius: 50%; background: linear-gradient(135deg, #667eea, #764ba2); color: white; display: flex; align-items: center; justify-content: center; font-size: 18px; flex-shrink: 0;">ü§ñ</div>
                            <div style="flex: 1;">
                                <div class="message-bubble" style="background: white; padding: 12px 16px; border-radius: 18px 18px 18px 4px; box-shadow: 0 1px 2px rgba(0,0,0,0.1); font-size: 15px; line-height: 1.5;">${text}</div>
                                <div style="font-size: 11px; color: #999; margin-top: 4px; padding-left: 4px;">${new Date().toLocaleTimeString('ru', {hour: '2-digit', minute: '2-digit'})}</div>
                            </div>
                        </div>
                    `;
                    container.insertAdjacentHTML('beforeend', html);
                    
                    if (inputType) {
                        container.insertAdjacentHTML('beforeend', this.renderInput(inputType, field));
                    }
                    
                    this.scrollToBottom();
                }, 800);
            }

            addUser(text) {
                const container = document.getElementById('messages');
                const html = `
                    <div class="chat-message user-message" style="display: flex; align-items: flex-start; gap: 8px; justify-content: flex-end;">
                        <div style="flex: 1; text-align: right;">
                            <div class="message-bubble" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 12px 16px; border-radius: 18px 18px 4px 18px; display: inline-block; max-width: 70%; text-align: left; font-size: 15px; line-height: 1.5;">${text}</div>
                            <div style="font-size: 11px; color: #999; margin-top: 4px; padding-right: 4px;">${new Date().toLocaleTimeString('ru', {hour: '2-digit', minute: '2-digit'})}</div>
                        </div>
                    </div>
                `;
                container.insertAdjacentHTML('beforeend', html);
                this.scrollToBottom();
            }

            renderInput(type, field) {
                if (type === 'scenario-choice') {
                    return `
                        <div class="chat-buttons" style="padding: 0 44px 0 0; display: flex; flex-direction: column; gap: 8px; margin-top: 8px;">
                            <button onclick="homeChat.selectScenario('inspection')" style="background: linear-gradient(135deg, #3b82f6, #6366f1); color: white; border: none; padding: 14px 20px; border-radius: 12px; font-size: 15px; font-weight: 500; cursor: pointer; transition: all 0.2s; box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);">
                                üë®‚Äçüîß –í—ã–∑–≤–∞—Ç—å –º–∞—Å—Ç–µ—Ä–∞
                            </button>
                            <button onclick="homeChat.selectScenario('estimate')" style="background: linear-gradient(135deg, #10b981, #14b8a6); color: white; border: none; padding: 14px 20px; border-radius: 12px; font-size: 15px; font-weight: 500; cursor: pointer; transition: all 0.2s; box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);">
                                üí∞ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å
                            </button>
                        </div>
                    `;
                }
                
                if (type === 'time-select') {
                    return `
                        <div class="chat-buttons" style="padding: 0 44px 0 0; display: flex; flex-direction: column; gap: 8px; margin-top: 8px;">
                            <button onclick="homeChat.handleTime('–£—Ç—Ä–æ (9:00-12:00)')" style="background: white; color: #333; border: 2px solid #3b82f6; padding: 12px 16px; border-radius: 12px; font-size: 14px; cursor: pointer; transition: all 0.2s;">
                                ‚òÄÔ∏è –£—Ç—Ä–æ (9:00-12:00)
                            </button>
                            <button onclick="homeChat.handleTime('–î–µ–Ω—å (12:00-17:00)')" style="background: white; color: #333; border: 2px solid #3b82f6; padding: 12px 16px; border-radius: 12px; font-size: 14px; cursor: pointer; transition: all 0.2s;">
                                üåû –î–µ–Ω—å (12:00-17:00)
                            </button>
                            <button onclick="homeChat.handleTime('–í–µ—á–µ—Ä (17:00-21:00)')" style="background: white; color: #333; border: 2px solid #3b82f6; padding: 12px 16px; border-radius: 12px; font-size: 14px; cursor: pointer; transition: all 0.2s;">
                                üåô –í–µ—á–µ—Ä (17:00-21:00)
                            </button>
                        </div>
                    `;
                }
                
                if (type === 'text-input') {
                    return `
                        <div class="chat-input-container" style="padding: 12px 0; display: flex; gap: 8px; align-items: center;">
                            <input type="text" class="chat-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç..." id="chat-text-input" onkeypress="if(event.key==='Enter')homeChat.submitText('${field}')" style="flex: 1; padding: 12px 16px; border: 2px solid #3b82f6; border-radius: 20px; font-size: 14px; outline: none; font-family: inherit;">
                            <button class="chat-send-btn" onclick="homeChat.submitText('${field}')" style="width: 44px; height: 44px; border-radius: 50%; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);">‚úàÔ∏è</button>
                        </div>
                    `;
                }
                
                if (type === 'phone-input') {
                    return `
                        <div class="chat-input-container" style="padding: 12px 0; display: flex; gap: 8px; align-items: center;">
                            <input type="tel" class="chat-input" placeholder="+7 (900) 123-45-67" id="chat-phone-input" onkeypress="if(event.key==='Enter')homeChat.submitPhone('${field}')" style="flex: 1; padding: 12px 16px; border: 2px solid #3b82f6; border-radius: 20px; font-size: 14px; outline: none; font-family: inherit;">
                            <button class="chat-send-btn" onclick="homeChat.submitPhone('${field}')" style="width: 44px; height: 44px; border-radius: 50%; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);">‚úàÔ∏è</button>
                        </div>
                    `;
                }
                
                return '';
            }

            selectScenario(scenario) {
                if (scenario === 'inspection') {
                    this.addUser('üë®‚Äçüîß –í—ã–∑–≤–∞—Ç—å –º–∞—Å—Ç–µ—Ä–∞');
                    this.scenario = 'inspection';
                    setTimeout(() => {
                        this.addBot('üìã –û—Ç–ª–∏—á–Ω–æ! –ó–∞–ø–∏—à—É –≤–∞—Å –Ω–∞ <b>–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –æ—Å–º–æ—Ç—Ä</b>.\n\nüïê –£–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –≤–∏–∑–∏—Ç–∞?', 'time-select');
                    }, 500);
                } else if (scenario === 'estimate') {
                    this.addUser('üí∞ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å');
                    setTimeout(() => {
                        window.location.href = '/services-calculator.html';
                    }, 800);
                }
            }

            handleTime(time) {
                this.data.visitTime = time;
                this.addUser(time);
                document.querySelector('.chat-buttons').remove();
                setTimeout(() => {
                    this.addBot('‚úçÔ∏è –ö—Ä–∞—Ç–∫–æ –æ–ø–∏—à–∏—Ç–µ –∑–∞–¥–∞—á—É\n\n<span style="font-size:12px;color:#999">–Ω–∞–ø—Ä–∏–º–µ—Ä: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–æ–∑–µ—Ç–∫—É / —Å–¥–µ–ª–∞—Ç—å –Ω–æ–≤—É—é –ø—Ä–æ–≤–æ–¥–∫—É</span>', 'text-input', 'taskDescription');
                }, 500);
            }

            submitText(field) {
                const input = document.getElementById('chat-text-input');
                const value = input.value.trim();
                if (!value) return;
                
                this.data[field] = value;
                this.addUser(value);
                input.closest('.chat-input-container').remove();
                
                if (field === 'taskDescription') {
                    setTimeout(() => {
                        this.addBot('üìû –£–∫–∞–∂–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω\n\n<span style="font-size:12px;color:#999">–Ω–∞–ø—Ä–∏–º–µ—Ä: +7 (900) 123-45-67</span>', 'phone-input', 'phone');
                    }, 500);
                }
            }

            submitPhone(field) {
                const input = document.getElementById('chat-phone-input');
                const value = input.value.trim();
                if (!value) return;
                
                this.data[field] = value;
                this.addUser(value);
                input.closest('.chat-input-container').remove();
                
                setTimeout(() => {
                    this.addBot(`‚úÖ –û—Ç–ª–∏—á–Ω–æ! –í–∞—à–∞ –∑–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞.

üë®‚Äçüîß –ú–∞—Å—Ç–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç!

<b>–í—Ä–µ–º—è –≤–∏–∑–∏—Ç–∞:</b> ${this.data.visitTime}
<b>–ó–∞–¥–∞—á–∞:</b> ${this.data.taskDescription}
<b>–¢–µ–ª–µ—Ñ–æ–Ω:</b> ${this.data.phone}`);
                    
                    // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä
                    console.log('–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞:', this.data);
                }, 500);
            }

            showTyping() {
                const container = document.getElementById('messages');
                const html = `
                    <div class="chat-message ai-message" id="typing-indicator" style="display: flex; align-items: flex-start; gap: 8px;">
                        <div class="message-avatar" style="width: 36px; height: 36px; border-radius: 50%; background: linear-gradient(135deg, #667eea, #764ba2); color: white; display: flex; align-items: center; justify-content: center; font-size: 18px;">ü§ñ</div>
                        <div class="message-bubble" style="background: white; padding: 12px 16px; border-radius: 18px 18px 18px 4px; box-shadow: 0 1px 2px rgba(0,0,0,0.1);">
                            <div class="typing-indicator" style="display: flex; gap: 4px; align-items: center;">
                                <div class="typing-dot" style="width: 8px; height: 8px; border-radius: 50%; background: #999; animation: typingBounce 1.4s infinite;"></div>
                                <div class="typing-dot" style="width: 8px; height: 8px; border-radius: 50%; background: #999; animation: typingBounce 1.4s infinite 0.2s;"></div>
                                <div class="typing-dot" style="width: 8px; height: 8px; border-radius: 50%; background: #999; animation: typingBounce 1.4s infinite 0.4s;"></div>
                            </div>
                        </div>
                    </div>
                `;
                container.insertAdjacentHTML('beforeend', html);
                this.scrollToBottom();
            }

            removeTyping() {
                const typing = document.getElementById('typing-indicator');
                if (typing) typing.remove();
            }

            scrollToBottom() {
                const messages = document.getElementById('messages');
                messages.scrollTop = messages.scrollHeight;
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        let homeChat;
        setTimeout(() => {
            homeChat = new HomePageChat();
        }, 100);
    </script>
    
    <style>
        @keyframes typingBounce {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }
        
        .chat-buttons button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
    </style>
</body>
</html>
