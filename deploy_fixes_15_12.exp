#!/usr/bin/expect -f
# Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹ UX Ğ¾Ñ‚ 15.12.2024
# - Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ° ĞºĞ½Ğ¾Ğ¿ĞºĞ° "Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒÑÑ Ğ² Ğ¼ĞµĞ½Ñ"
# - Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ-Ğ±Ğ°Ñ€
# - ĞœĞ¸Ğ»Ñ‹Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ¼Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ²

set timeout 120
set password "pneDRE2K?Tz1k-"
set host "root@176.98.178.109"

puts "\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
puts "  ğŸ¨ Ğ”Ğ•ĞŸĞ›ĞĞ™ UX Ğ£Ğ›Ğ£Ğ§Ğ¨Ğ•ĞĞ˜Ğ™"
puts "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n"

# ========== ĞšĞĞŸĞ˜Ğ Ğ£Ğ•Ğœ Ğ¤ĞĞ™Ğ›Ğ« ==========
puts "ğŸ“¦ ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ğ½Ğ° VPS...\n"

spawn scp telegram_client_bot.py $host:/root/ai_service_bots/
expect {
    "password:" {
        send "$password\r"
        exp_continue
    }
    "yes/no" {
        send "yes\r"
        exp_continue
    }
    eof
}

puts "  âœ“ telegram_client_bot.py ÑĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½\n"

spawn scp master_notification.py $host:/root/ai_service_bots/
expect {
    "password:" {
        send "$password\r"
        exp_continue
    }
    eof
}

puts "  âœ“ master_notification.py ÑĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½\n"

# ========== ĞŸĞ•Ğ Ğ•Ğ—ĞĞŸĞ£Ğ¡Ğš Ğ‘ĞĞ¢Ğ ==========
puts "ğŸ”„ ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞº ĞºĞ»Ğ¸ĞµĞ½Ñ‚ÑĞºĞ¾Ğ³Ğ¾ Ğ±Ğ¾Ñ‚Ğ°...\n"

spawn ssh $host
expect "password:"
send "$password\r"
expect "# "

send "cd /root/ai_service_bots\r"
expect "# "
puts "  âœ“ ĞŸĞµÑ€ĞµÑˆĞ»Ğ¸ Ğ² Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ\n"

send "pkill -f telegram_client_bot.py\r"
expect "# "
sleep 2
puts "  âœ“ ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ğ»Ğ¸ ÑÑ‚Ğ°Ñ€ÑƒÑ Ğ²ĞµÑ€ÑĞ¸Ñ Ğ±Ğ¾Ñ‚Ğ°\n"

send "screen -dmS client_bot python3 telegram_client_bot.py\r"
expect "# "
sleep 2
puts "  âœ“ Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ğ»Ğ¸ Ğ½Ğ¾Ğ²ÑƒÑ Ğ²ĞµÑ€ÑĞ¸Ñ Ğ±Ğ¾Ñ‚Ğ°\n"

send "screen -ls\r"
expect "# "
puts "  âœ“ ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ğ»Ğ¸ screen ÑĞµÑÑĞ¸Ğ¸\n"

send "exit\r"
expect eof

puts "\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
puts "  âœ… Ğ”Ğ•ĞŸĞ›ĞĞ™ Ğ—ĞĞ’Ğ•Ğ Ğ¨ĞĞ!"
puts "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n"

puts "ğŸ¨ Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ:"
puts "  â€¢ ĞšĞ½Ğ¾Ğ¿ĞºĞ° 'Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒÑÑ Ğ² Ğ¼ĞµĞ½Ñ' Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚!"
puts "  â€¢ ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ-Ğ±Ğ°Ñ€ Ñ Ğ¿Ñ€Ğ¾Ñ†ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸: ğŸŸ¢ğŸŸ¢ğŸŸ¢âšªâšª 60%"
puts "  â€¢ ĞœĞ¸Ğ»Ñ‹Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ¼Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ² Ğ² ÑÑ‚Ğ¸Ğ»Ğµ promo_bot"
puts "  â€¢ Ğ—Ğ²ÑƒĞºĞ¾Ğ²Ñ‹Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ´Ğ»Ñ Ğ¼Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ²"
puts "  â€¢ Ğ‘Ğ¾Ğ»ĞµĞµ Ğ´Ñ€ÑƒĞ¶ĞµĞ»ÑĞ±Ğ½Ñ‹Ğ¹ Ñ‚Ğ¾Ğ½ Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ"
puts ""
puts "ğŸ§ª ĞŸÑ€Ğ¾Ñ‚ĞµÑÑ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ:"
puts "  1. /start â†’ 'Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒÑÑ Ğ² Ğ¼ĞµĞ½Ñ' Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ"
puts "  2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ·Ğ°ÑĞ²ĞºÑƒ â†’ Ğ²Ğ¸Ğ´Ğ¸Ñ‚Ğµ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ-Ğ±Ğ°Ñ€"
puts "  3. ĞœĞ°ÑÑ‚ĞµÑ€Ğ° Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°Ñ‚ Ğ¼Ğ¸Ğ»Ğ¾Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾ Ğ·Ğ²ÑƒĞºĞ¾Ğ¼!\n"
puts "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n"
