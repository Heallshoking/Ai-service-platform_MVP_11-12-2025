#!/usr/bin/expect -f
# Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹ Ğ¾Ñ‚ 15.12.2024
# ĞĞ²Ñ‚Ğ¾Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ğ¼Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ² + master_notification.py

set timeout 120
set password "pneDRE2K?Tz1k-"
set host "root@176.98.178.109"

puts "\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
puts "  ğŸš€ Ğ”Ğ•ĞŸĞ›ĞĞ™ ĞĞ’Ğ¢ĞĞĞĞ—ĞĞĞ§Ğ•ĞĞ˜Ğ¯ ĞœĞĞ¡Ğ¢Ğ•Ğ ĞĞ’"
puts "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n"

# ========== ĞšĞĞŸĞ˜Ğ Ğ£Ğ•Ğœ Ğ¤ĞĞ™Ğ›Ğ« ==========
puts "ğŸ“¦ ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ğ½Ğ° VPS...\n"

spawn scp telegram_client_bot.py $host:/root/ai_service_bots/
expect {
    "password:" {
        send "$password\r"
        exp_continue
    }
    "yes/no" {
        send "yes\r"
        exp_continue
    }
    eof
}

puts "  âœ“ telegram_client_bot.py ÑĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½\n"

spawn scp master_notification.py $host:/root/ai_service_bots/
expect {
    "password:" {
        send "$password\r"
        exp_continue
    }
    eof
}

puts "  âœ“ master_notification.py ÑĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½\n"

# ========== ĞŸĞ•Ğ Ğ•Ğ—ĞĞŸĞ£Ğ¡Ğš Ğ‘ĞĞ¢Ğ ==========
puts "ğŸ”„ ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞº ĞºĞ»Ğ¸ĞµĞ½Ñ‚ÑĞºĞ¾Ğ³Ğ¾ Ğ±Ğ¾Ñ‚Ğ°...\n"

spawn ssh $host
expect "password:"
send "$password\r"
expect "# "

send "cd /root/ai_service_bots\r"
expect "# "
puts "  âœ“ ĞŸĞµÑ€ĞµÑˆĞ»Ğ¸ Ğ² Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ\n"

send "pkill -f telegram_client_bot.py\r"
expect "# "
sleep 2
puts "  âœ“ ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ğ»Ğ¸ ÑÑ‚Ğ°Ñ€ÑƒÑ Ğ²ĞµÑ€ÑĞ¸Ñ Ğ±Ğ¾Ñ‚Ğ°\n"

send "screen -dmS client_bot python3 telegram_client_bot.py\r"
expect "# "
sleep 2
puts "  âœ“ Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ğ»Ğ¸ Ğ½Ğ¾Ğ²ÑƒÑ Ğ²ĞµÑ€ÑĞ¸Ñ Ğ±Ğ¾Ñ‚Ğ°\n"

send "screen -ls\r"
expect "# "
puts "  âœ“ ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ğ»Ğ¸ screen ÑĞµÑÑĞ¸Ğ¸\n"

send "ps aux | grep telegram_client_bot.py\r"
expect "# "
puts "  âœ“ ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ğ»Ğ¸ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ\n"

send "exit\r"
expect eof

puts "\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
puts "  âœ… Ğ”Ğ•ĞŸĞ›ĞĞ™ Ğ—ĞĞ’Ğ•Ğ Ğ¨ĞĞ Ğ£Ğ¡ĞŸĞ•Ğ¨ĞĞ!"
puts "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n"

puts "ğŸ“‹ Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ:"
puts "  â€¢ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ master_notification.py"
puts "  â€¢ ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½ telegram_client_bot.py"
puts "  â€¢ ĞœĞ°ÑÑ‚ĞµÑ€Ğ° Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ÑÑ‚ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ!"
puts ""
puts "ğŸ§ª ĞšĞ°Ğº Ğ¿Ñ€Ğ¾Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ:"
puts "  1. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒ /start Ğ±Ğ¾Ñ‚Ñƒ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ²"
puts "  2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ñ‚ĞµÑÑ‚Ğ¾Ğ²ÑƒÑ Ğ·Ğ°ÑĞ²ĞºÑƒ"
puts "  3. ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸ Ğ·Ğ°ÑĞ²ĞºÑƒ"
puts "  4. ĞŸĞ ĞĞ’Ğ•Ğ Ğ¬: Ğ¼Ğ°ÑÑ‚ĞµÑ€Ğ° Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ!\n"
puts "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n"
