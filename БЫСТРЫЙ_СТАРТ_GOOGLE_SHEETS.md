# üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢: Google Sheets Integration

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ:

1. ‚úÖ –°–æ–∑–¥–∞–Ω `google_sheets_integration.py` - –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Google Sheets
2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `telegram_client_bot.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Sheets
3. ‚úÖ –°–æ–∑–¥–∞–Ω `dashboard.html` - –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º Google Sheets
4. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è `–ù–ê–°–¢–†–û–ô–ö–ê_GOOGLE_SHEETS.md`

---

## üìã –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨ (10 –º–∏–Ω—É—Ç):

### –®–ê–ì 1: –°–æ–∑–¥–∞—Ç—å Google Cloud Project (2 –º–∏–Ω—É—Ç—ã)

1. –û—Ç–∫—Ä—ã—Ç—å: https://console.cloud.google.com/
2. –ù–∞–∂–∞—Ç—å "Select a project" ‚Üí "New Project"
3. –ò–º—è –ø—Ä–æ–µ–∫—Ç–∞: `BALT-SET Bot`
4. –ù–∞–∂–∞—Ç—å "Create"

### –®–ê–ì 2: –í–∫–ª—é—á–∏—Ç—å API (1 –º–∏–Ω—É—Ç–∞)

1. –í –º–µ–Ω—é —Å–ª–µ–≤–∞: "APIs & Services" ‚Üí "Enable APIs and Services"
2. –ù–∞–π—Ç–∏ –∏ –≤–∫–ª—é—á–∏—Ç—å:
   - ‚úÖ Google Sheets API
   - ‚úÖ Google Drive API

### –®–ê–ì 3: –°–æ–∑–¥–∞—Ç—å Service Account (2 –º–∏–Ω—É—Ç—ã)

1. "APIs & Services" ‚Üí "Credentials"
2. "Create Credentials" ‚Üí "Service Account"
3. –ò–º—è: `balt-set-bot`
4. –ù–∞–∂–∞—Ç—å "Create and Continue"
5. –†–æ–ª—å: `Editor`
6. –ù–∞–∂–∞—Ç—å "Done"

### –®–ê–ì 4: –°–∫–∞—á–∞—Ç—å credentials.json (1 –º–∏–Ω—É—Ç–∞)

1. –ù–∞–∂–∞—Ç—å –Ω–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã–π Service Account
2. –í–∫–ª–∞–¥–∫–∞ "Keys"
3. "Add Key" ‚Üí "Create new key"
4. –í—ã–±—Ä–∞—Ç—å —Ç–∏–ø: `JSON`
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª –∫–∞–∫ `credentials.json`

### –®–ê–ì 5: –°–æ–∑–¥–∞—Ç—å Google –¢–∞–±–ª–∏—Ü—É (1 –º–∏–Ω—É—Ç–∞)

1. –û—Ç–∫—Ä—ã—Ç—å: https://sheets.google.com/
2. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É
3. –ù–∞–∑–≤–∞—Ç—å: `BALT-SET –ó–∞—è–≤–∫–∏`
4. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å Spreadsheet ID –∏–∑ URL:
   ```
   https://docs.google.com/spreadsheets/d/1ABC...XYZ/edit
                                          ^^^^^^^^^^^
                                          –≠—Ç–æ Spreadsheet ID
   ```

### –®–ê–ì 6: –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ç–∞–±–ª–∏—Ü–µ–π (1 –º–∏–Ω—É—Ç–∞)

1. –í credentials.json –Ω–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É `"client_email"`:
   ```json
   "client_email": "balt-set-bot@....iam.gserviceaccount.com"
   ```
2. –í Google Sheets –Ω–∞–∂–∞—Ç—å "Share"
3. –í—Å—Ç–∞–≤–∏—Ç—å —ç—Ç–æ—Ç email
4. –í—ã–±—Ä–∞—Ç—å —Ä–æ–ª—å: `Editor`
5. –ù–∞–∂–∞—Ç—å "Share"

### –®–ê–ì 7: –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ VPS (2 –º–∏–Ω—É—Ç—ã)

```bash
# 1. –ö–æ–ø–∏—Ä—É–µ–º credentials.json –Ω–∞ VPS
scp credentials.json root@176.98.178.109:/root/ai_service_bots/

# 2. –ö–æ–ø–∏—Ä—É–µ–º google_sheets_integration.py
scp google_sheets_integration.py root@176.98.178.109:/root/ai_service_bots/

# 3. –ö–æ–ø–∏—Ä—É–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π telegram_client_bot.py
scp telegram_client_bot.py root@176.98.178.109:/root/ai_service_bots/

# 4. –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ VPS
ssh root@176.98.178.109

# 5. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip3 install gspread oauth2client

# 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –±–æ—Ç–∞
cd /root/ai_service_bots/
pkill -f telegram_client_bot.py
sleep 2
nohup python3 telegram_client_bot.py > client_bot.log 2>&1 &

# 7. –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω
ps aux | grep telegram_client_bot.py | grep -v grep
```

### –®–ê–ì 8: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Dashboard (1 –º–∏–Ω—É—Ç–∞)

1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª `static/dashboard.html`
2. –ù–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É:
   ```javascript
   const SPREADSHEET_ID = ''; // –í—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ Spreadsheet ID
   ```
3. –í—Å—Ç–∞–≤–∏—Ç—å Spreadsheet ID –∏–∑ –®–ê–ì 5
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª
5. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ VPS:
   ```bash
   scp static/dashboard.html root@176.98.178.109:/var/www/bag4moms/data/www/bag4moms.balt-set.ru/
   ```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ—Ç–∞

```bash
# –ù–∞ VPS –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
tail -f /root/ai_service_bots/client_bot.log

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# ‚úÖ Google Sheets –ø–æ–¥–∫–ª—é—á–µ–Ω
# ‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω
```

### –¢–µ—Å—Ç 2: –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É —á–µ—Ä–µ–∑ –±–æ—Ç–∞

1. –û—Ç–∫—Ä—ã—Ç—å Telegram: @ai_service_client_bot
2. –ù–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥: `/start`
3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É
4. –í –∫–æ–Ω—Ü–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: `‚úÖ –ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞! üé´ –ù–æ–º–µ—Ä –∑–∞—è–≤–∫–∏: #123`

### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Google Sheets

1. –û—Ç–∫—Ä—ã—Ç—å —Ç–∞–±–ª–∏—Ü—É "BALT-SET –ó–∞—è–≤–∫–∏"
2. –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è 3 –ª–∏—Å—Ç–∞:
   - –ó–∞—è–≤–∫–∏ (—Å –Ω–æ–≤–æ–π –∑–∞—è–≤–∫–æ–π)
   - –ú–∞—Å—Ç–µ—Ä–∞
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –¢–µ—Å—Ç 4: –û—Ç–∫—Ä—ã—Ç—å Dashboard

1. –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `https://bag4moms.balt-set.ru/dashboard.html`
2. –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å Google Sheets

---

## üìä –°–¢–†–£–ö–¢–£–†–ê –î–ê–ù–ù–´–•:

### –õ–∏—Å—Ç "–ó–∞—è–≤–∫–∏" (15 –∫–æ–ª–æ–Ω–æ–∫):
```
ID | –î–∞—Ç–∞/–í—Ä–µ–º—è | –ò—Å—Ç–æ—á–Ω–∏–∫ | –ò–º—è | –¢–µ–ª–µ—Ñ–æ–Ω | –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ü—Ä–æ–±–ª–µ–º–∞ | 
–ê–¥—Ä–µ—Å | –°—Ç–∞—Ç—É—Å | –ú–∞—Å—Ç–µ—Ä | –¶–µ–Ω–∞ | –ö–æ–º–∏—Å—Å–∏—è 30% | –î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è | 
–û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
```

### –õ–∏—Å—Ç "–ú–∞—Å—Ç–µ—Ä–∞" (10 –∫–æ–ª–æ–Ω–æ–∫):
```
ID | Telegram ID | –ò–º—è | –¢–µ–ª–µ—Ñ–æ–Ω | –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è | –†–µ–π—Ç–∏–Ω–≥ | 
–ó–∞–∫–∞–∑–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ | –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ | –°—Ç–∞—Ç—É—Å | –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
```

### –õ–∏—Å—Ç "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞" (5 –∫–æ–ª–æ–Ω–æ–∫):
```
–ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –ü–µ—Ä–∏–æ–¥ | –û–±–Ω–æ–≤–ª–µ–Ω–æ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
```

---

## üîß –£–ü–†–ê–í–õ–ï–ù–ò–ï:

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –±–æ—Ç–∞:
```bash
ssh root@176.98.178.109
tail -f /root/ai_service_bots/client_bot.log
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞:
```bash
ssh root@176.98.178.109
cd /root/ai_service_bots/
pkill -f telegram_client_bot.py
sleep 2
nohup python3 telegram_client_bot.py > client_bot.log 2>&1 &
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
```bash
ssh root@176.98.178.109
ps aux | grep telegram | grep -v grep
```

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢:

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:

‚úÖ –í—Å–µ –∑–∞—è–≤–∫–∏ –∏–∑ Telegram –±–æ—Ç–∞ ‚Üí Google Sheets  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ 3 –ª–∏—Å—Ç–æ–≤ (–ó–∞—è–≤–∫–∏, –ú–∞—Å—Ç–µ—Ä–∞, –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)  
‚úÖ –†–∞—Å—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏ 30% –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏  
‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å `dashboard.html` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Google Sheets  
‚úÖ –ú–æ–∂–Ω–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞—è–≤–∫–∏ –ø—Ä—è–º–æ –≤ Google Sheets  
‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏  

---

## üÜò –ü–†–û–ë–õ–ï–ú–´:

### –û—à–∏–±–∫–∞: "‚ö†Ô∏è Google Sheets –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω"

**–ü—Ä–∏—á–∏–Ω–∞:** credentials.json –Ω–µ –Ω–∞–π–¥–µ–Ω  
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞
ssh root@176.98.178.109
ls -la /root/ai_service_bots/credentials.json

# –ï—Å–ª–∏ –Ω–µ—Ç - —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:
exit
scp credentials.json root@176.98.178.109:/root/ai_service_bots/
```

### –û—à–∏–±–∫–∞: "Permission denied"

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–∞–±–ª–∏—Ü–∞ –Ω–µ —Ä–∞—Å—à–∞—Ä–µ–Ω–∞ —Å Service Account  
**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä—ã—Ç—å Google Sheets
2. Share ‚Üí –≤—Å—Ç–∞–≤–∏—Ç—å email –∏–∑ credentials.json
3. –†–æ–ª—å: Editor

### –û—à–∏–±–∫–∞: "Spreadsheet not found"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è —Ç–∞–±–ª–∏—Ü—ã  
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º—è: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `BALT-SET –ó–∞—è–≤–∫–∏`
2. –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –≤ `.env`:
   ```
   SPREADSHEET_NAME=–í–∞—à–µ_–ò–º—è_–¢–∞–±–ª–∏—Ü—ã
   ```

---

## üìñ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û:

- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `–ù–ê–°–¢–†–û–ô–ö–ê_GOOGLE_SHEETS.md`
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã: `–°–•–ï–ú–ê_–°–ò–°–¢–ï–ú–´.md`
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏: `–£–ü–†–ê–í–õ–ï–ù–ò–ï_–ë–û–¢–ê–ú–ò.md`

---

üéâ **–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –≤—Å–µ –∑–∞—è–≤–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Google Sheets –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ Dashboard!**
